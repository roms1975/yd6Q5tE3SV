# Тестовое задание
https://ag-hello.notion.site/StoryValut-Yii2-2a7e9d20e57b80b895a8c26648c6f462
# Разработка StoryValut (Yii2)

## Описание

Создать приложение "StoryValut", в котором любой может оставить своё сообщение.

<img width="1025" height="576" alt="image" src="https://github.com/user-attachments/assets/afda7f7d-25ac-4e4f-ab70-8ccd7c275ab0" />

## Требование к приложению

1. Фреймворк: Yii2, рекомендуется шаблон "basic".
2. Все лишние Yii2 Basic страницы по-умолчанию вроде "About", "Contact" должны быть удалены
3. Относитесь к проекту так, будто это реальный коммерческий продукт:
   a. понятный и логично структурированный код;
   b. внимание к безопасности;
   c. поддерживаемость и простота дальнейшего развития проекта;
   d. документирование;
4. Разрешено использовать сторонние библиотеки, возможности фреймворка для решения задач.

## Требования к отправке постов

- [ ] Ограничения символов:
  - Имя автора: минимум 2 символа, максимум 15.
  - Сообщение: минимум 5 символов, максимум 1000.
- [ ] Валидный e-mail
- [ ] Каптча/Рекаптча
- [ ] IP автора должен записываться
- [ ] Дата публикации должна записываться в unixtime
- [ ] Запрещены сообщения, состоящие исключительно из пробелов
- [ ] Разрешать отправлять автору только 1 сообщение в 3 минуты. При попытке отправить ранее, чем через 3 минуты — выводить ошибку, в которой указано когда может быть опубликовано следующее сообщение
  Ограничение публикаций должно быть по IP, по Email или комбинированное. Способ ограничения должен настраиваться
- [ ] Возможность прикрепить изображение к сообщению (опционально)
  - Размер изображения не более 2 Мб
  - Размер каждой из сторон не превышает 1500 px
  - Допускаются только изображения jpg, png, webp
  - Изображение загружается в директорию, доступную из сети интернет

## Требования к выводу постов

- [ ] Посты должны выводится в формате Bootstrap Card
  <details>
  <summary>ℹ️ Готовая разметка</summary>
  Информация о готовой разметке
  </details>
- [ ] Выводить общее число сообщений автора (на основе IP-адреса)
- [ ] Разрешать использовать в сообщении только HTML-тэги: `<b>`, `<i>`, `<s>`
- [ ] Дата публикации выводится в формате "Relative time" (Пример: "_10 минут назад_")
- [ ] Полузакрытый IP адрес:
  - Для IPv4: 2 последних разряда (октета) должны быть скрыты. Пример: `46.211.**.**`
  - Для IPv6 адреса — скрывать 4 последних секции адреса IPv6. Пример: `2001:0db8:11a3:09d7:1f34:8a2e:07a0:765d:****:****:****:****`
- [ ] Если к сообщению прикреплено изображение, то оно должно быть выведено, иначе ничего не добавлять в разметку

## Управление постами

- [ ] После отправки поста, отправлять автору на e-mail письмо, в котором идут приватные ссылки на управление его постом:
  1. Редактирование поста
  2. Удаление поста

> **ℹ️ Callout**
> Реальную отправку настраивать **не** нужно. Результат будет проверяться в отладочном режиме отправки почты Yii2.

- [ ] Редактирование доступно в течение 12 часов после отправки. Редактируется только само сообщение. Применяются те же правила валидации, что и при отправке. Если при редактировании отправлено новое изображение, то оно заменяет собой первоначальное (если оно было)
- [ ] Удаление поста доступно в течение 14 дней с момента публикации. Физическое удаление из базы данных не происходит (soft-deleted). Подтверждение удаления выполняется на отдельной странице, где пользователь должен явно подтвердить действие.
